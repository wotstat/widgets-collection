<template>
  <WidgetPreviewRoot auto-scale :predicted-aspect-ratio="aspectRatio">

    <PreviewContent v-if="isMiniPreview" :history-tangent />

    <Content v-else :skin="skin ?? 'protanki-new'" :percent="0.56" :time="1.3" :tangent="0.6"
      :history-tangent="historyTangent" :history-time="historyTime" :display-title="title" :display-value="value" />
  </WidgetPreviewRoot>
</template>


<script setup lang="ts">
import WidgetPreviewRoot from '@/components/WidgetPreviewRoot.vue';
import Content from './Content.vue';
import { skins } from './define.widget';
import { computed } from 'vue';
import PreviewContent from './PreviewContent.vue';



const props = defineProps<{
  isMiniPreview: boolean
  percent?: boolean
  skin?: typeof skins[number],
  title?: boolean,
  value?: boolean,
}>();

const aspects = {
  'protanki-old': 0.44,
  'protanki-new': 0.56,
  'time': 2.3,
  'tangent': 2.3,
  'percent': 2.3,
  'chart-time': 1.4,
  'chart-tangent': 1.4
} as const

const aspectRatio = computed(() => {
  if (props.isMiniPreview) return 1.87


  return aspects[props.skin ?? 'protanki-new']
})

const historyTime = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.12, 0.29, 0.19, 0.12, 2.08, 2.92, 4.34, 4.71, 4.6, 4.49, 4.49, 4.49, 4.56, 4.46, 4.49, 4.38, 4.94, 4.94, 4.94, 4.96, 4.98, 4.98, 4.99, 5, 5.01, 4.9, 5.02, 5.03, 5.04, 4.93, 4.83, 4.78, 4.81, 4.8, 4.7, 4.6, 4.49, 4.38, 4.28, 4.17, 4.07, 3.97, 3.97, 3.98, 4.01, 4.05, 4.08, 4.1, 4.12, 4.14, 4.16, 4.18, 4.85, 4.86, 4.87, 4.87, 4.95, 5.22, 5.25, 5.25, 5.25, 5.25, 5.26, 5.26, 5.26, 5.27, 5.27, 5.27, 5.37, 5.34, 5.3, 5.26, 5.22, 5.12, 5.02, 4.92, 4.81, 4.71, 4.6, 4.5, 4.4, 4.3, 4.2, 4.09, 3.99, 3.99, 3.89, 3.78, 3.68, 3.58, 3.48, 3.38, 3.27, 3.17, 3.07, 2.97, 2.86, 2.76, 2.66, 2.56, 2.46, 2.35, 2.26, 2.15, 2.05, 1.95, 1.84, 1.74, 1.64, 1.54, 1.44, 1.34, 1.24, 1.13, 1.03, 0.93, 0.83, 0.72, 0.62, 0.52, 0.42, 0.32, 0.22, 0.1, 0, 0, 2.92, 2.92, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.02, 3.92, 3.81, 3.82, 3.71, 3.61, 4.13, 4.13, 4.13, 4.13, 4.13, 4.13, 4.03, 3.93, 3.82, 3.71, 3.6, 3.6, 3.49, 4.13, 4.13, 4.03, 3.92, 3.81, 3.71, 3.6, 3.49, 4.15, 4.19, 4.33, 4.23, 4.72, 4.85, 4.87, 4.89, 4.92, 5.01, 4.93, 4.95, 4.95, 4.95, 4.95, 4.97, 5.25, 5.23, 5.27, 5.18, 5.16, 5.16, 5.14, 5.05, 4.94, 4.83, 4.77, 4.79, 4.78, 4.77, 4.77, 4.77, 4.79, 4.79, 4.77, 4.77, 4.79, 4.69, 4.59, 4.48, 4.38, 4.28, 4.18, 4.07, 3.97, 3.87, 3.76, 3.66, 3.56, 3.46, 3.35, 3.25, 3.15, 3.05, 2.95, 2.84, 2.72, 2.61, 2.51, 2.41, 2.41, 2.31, 2.21, 2.11, 2.01, 1.91, 1.8, 1.7, 1.6, 1.5, 1.39, 1.29, 1.19, 1.09, 0.98, 0.88, 0.78, 0.67, 0.58, 0.48, 2.81, 2.7, 2.6, 2.5, 2.4, 2.3, 2.19, 2.09, 1.99, 1.88, 1.78, 1.78, 1.58, 1.58, 1.48, 1.37, 1.27, 1.17, 1.06, 0.97, 0.86, 0.76, 1.35, 1.3]
const historyTangent = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.32, 0.32, 0.32, 0.34, 0.37, 0.35, 0.34, 0.91, 1.38, 2.8, 3.38, 3.2, 3.03, 3.02, 3.02, 3.13, 2.97, 3.02, 2.86, 3.79, 3.79, 3.79, 3.82, 3.86, 3.86, 3.88, 3.9, 3.91, 3.7, 3.94, 3.96, 3.97, 3.77, 3.59, 3.49, 3.55, 3.54, 3.36, 3.19, 3.02, 2.86, 2.72, 2.58, 2.45, 2.33, 2.33, 2.34, 2.37, 2.43, 2.46, 2.49, 2.51, 2.54, 2.56, 2.59, 3.62, 3.63, 3.65, 3.66, 3.81, 4.35, 4.42, 4.42, 4.42, 4.43, 4.43, 4.44, 4.45, 4.45, 4.46, 4.46, 4.68, 4.63, 4.52, 4.43, 4.36, 4.14, 3.93, 3.74, 3.55, 3.37, 3.2, 3.04, 2.89, 2.74, 2.61, 2.47, 2.35, 2.35, 2.24, 2.12, 2.02, 1.92, 1.82, 1.73, 1.65, 1.56, 1.48, 1.41, 1.34, 1.27, 1.21, 1.15, 1.09, 1.04, 0.99, 0.94, 0.89, 0.85, 0.8, 0.77, 0.73, 0.69, 0.66, 0.62, 0.59, 0.56, 0.54, 0.51, 0.48, 0.46, 0.44, 0.42, 0.4, 0.38, 0.36, 0.34, 0.32, 0.32, 1.38, 1.38, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.39, 2.27, 2.15, 2.16, 2.04, 1.94, 2.53, 2.53, 2.53, 2.53, 2.53, 2.53, 2.4, 2.28, 2.16, 2.05, 1.94, 1.94, 1.84, 2.53, 2.53, 2.39, 2.27, 2.15, 2.04, 1.94, 1.84, 2.55, 2.6, 2.79, 2.65, 3.39, 3.62, 3.65, 3.69, 3.74, 3.92, 3.76, 3.8, 3.81, 3.81, 3.81, 3.83, 4.41, 4.37, 4.46, 4.28, 4.23, 4.22, 4.19, 3.99, 3.77, 3.58, 3.48, 3.5, 3.5, 3.48, 3.48, 3.48, 3.51, 3.51, 3.47, 3.48, 3.51, 3.33, 3.17, 3.01, 2.86, 2.72, 2.59, 2.45, 2.33, 2.21, 2.1, 1.99, 1.9, 1.8, 1.71, 1.63, 1.55, 1.47, 1.4, 1.32, 1.25, 1.18, 1.13, 1.07, 1.07, 1.02, 0.97, 0.92, 0.87, 0.83, 0.79, 0.75, 0.71, 0.68, 0.64, 0.61, 0.58, 0.55, 0.52, 0.5, 0.47, 0.45, 0.43, 0.41, 1.3, 1.24, 1.18, 1.12, 1.06, 1.01, 0.96, 0.91, 0.86, 0.82, 0.78, 0.78, 0.7, 0.7, 0.67, 0.64, 0.6, 0.57, 0.54, 0.52, 0.49, 0.47, 0.62, 0.60]


</script>


<style lang="scss" scoped>
.container {
  background-color: rgba(71, 169, 255, 0.201);
  height: 14em;
  display: flex;
  gap: 0.5em;

  .l1,
  .l2,
  .l3 {
    background-color: rgba(105, 255, 71, 0.201);
    max-width: 40%;
    font-size: 0.3em;
  }
}
</style>